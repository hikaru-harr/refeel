generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
}

enum PhotoStatus {
  UPLOADED
  PROCESSING
  DONE
  ERROR
}

model Photo {
  id        String      @id @default(uuid())
  userId    String
  objectKey String      @unique
  mime      String
  bytes     Int
  width     Int?
  height    Int?
  exifJson  Json?
  sha256    String?
  status    PhotoStatus @default(UPLOADED)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  @@index([userId, createdAt(sort: Desc)])
}
